<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Waste Eye</title>

    <link rel="stylesheet" href="index.css">


</head>

<body>
    <div class="navbar">
        <div class="brand">
            <img src="./img/logo.png" style="height:50%">
            <p style="font-size:30px">WASTE EYE</p>
        </div>
        <div class="buttons">
            <div class="button" onclick="tab('img')">
                IMAGE
            </div>
            <div class="button" onclick="tab('txt')">
                TEXT
            </div>
        </div>
    </div>

    <div class="center">
        <label for="img">Select waste image:</label></br>
        <input style="text-align:center !important" type="file" id="img" name="img" accept="image/*"></br>
        <input type="submit">
        <button onclick="startVideo()">Take a Picture</button>
        <button onclick="takePic()">Snap</button>
        <button onclick="submitPic()"></button>
    </div>
    <div class="center">
        <div id="img" class="imgbox">
            <video autoplay="true" id="videoElement"></video>
            <canvas id="canvas" style="overflow: auto;"></canvas>
        </div>

        <div id="txt" class="searchbar">
            <form style="width:100%">
                <label for="img">Input waste name:</label></br>
                <input style="text-align:center !important" type="text"></br>
                <input type="submit">
            </form>
        </div>

        <p style="font-size:20px">Object Name</p>
        <div class="imgbox">Test</div>
    </div>
</body>

<script>
    function tab(tabname) {

        var img, txt
        img = document.getElementById("img")
        txt = document.getElementById("txt")

        if (tabname == "img") {
            img.style.display = "flex";
            txt.style.display = "none";
        }
        else {
            img.style.display = "none";
            txt.style.display = "flex";
        }

    }

    function startVideo() {
        let video = document.querySelector("#videoElement");
        let canvas = document.getElementById("canvas")
        video.removeAttribute("hidden")
        canvas.setAttribute("hidden", "hideen")

        if (navigator.mediaDevices.getUserMedia) {
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(function (stream) {
                    video.srcObject = stream;
                })
                .catch(function (error) {
                    console.log("something went wrong")
                })
        } else {
            console.log("unsupported.")
        }
    }
    function takePic() {
        var canvas = document.getElementById("canvas");
        var video = document.querySelector("video");
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        canvas.getContext("2d").drawImage(video, 0, 0, video.videoWidth, video.videoHeight);

        canvas.removeAttribute("hidden")
        video.setAttribute("hidden", "hidden");
    }
</script>

</html>